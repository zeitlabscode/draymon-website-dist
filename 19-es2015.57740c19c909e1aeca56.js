(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{XihW:function(e,t,n){"use strict";n.r(t),n.d(t,"VideoCallModule",(function(){return f}));var i=n("ofXK"),o=n("PSD3"),r=n.n(o),c=n("fXoL"),s=n("N+K7"),a=n("CNll"),l=n("tyNb");function g(e,t){1&e&&(c.Mb(0),c.Ob(1,"div",2),c.Ob(2,"span",3),c.pc(3," Please Wait... "),c.Kb(4,"div",4),c.Nb(),c.Nb(),c.Lb())}function d(e,t){if(1&e){const e=c.Pb();c.Ob(0,"div"),c.Ob(1,"h4"),c.Ob(2,"span",6),c.pc(3,"Meeting ends in: "),c.Nb(),c.pc(4),c.Nb(),c.Ob(5,"div",7),c.Ob(6,"div",8),c.Wb("click",(function(){return c.kc(e),c.Yb(2).toggleScreen()})),c.Ob(7,"i",9),c.pc(8," fullscreen "),c.Nb(),c.Nb(),c.Kb(9,"iframe",10),c.Nb(),c.Nb()}if(2&e){const e=c.Yb(2);c.zb(4),c.tc(" ",e.hour,"h ",e.minute,"m ",e.second,"s")}}function m(e,t){1&e&&(c.Ob(0,"div"),c.Ob(1,"div",11),c.Kb(2,"img",12),c.Ob(3,"p"),c.pc(4,"Meeting Over"),c.Nb(),c.Ob(5,"a",13),c.pc(6," Go to Dashboard"),c.Nb(),c.Nb(),c.Nb())}function b(e,t){if(1&e&&(c.Ob(0,"div",5),c.oc(1,d,10,3,"div",0),c.oc(2,m,7,0,"div",0),c.Nb()),2&e){const e=c.Yb();c.zb(1),c.ec("ngIf",e.meeting),c.zb(1),c.ec("ngIf",!e.meeting)}}const h=[{path:"",component:(()=>{class e{constructor(e,t,n){this.http=e,this.share=t,this.router=n,this.meeting=!1,this.hour=0,this.minute=0,this.second=0}ngOnInit(){this.loading=!0,this.http.postToBackend("/admin/meeting/current",{adminId:this.share.user}).then(e=>{this.loading=!1,console.log(e),7e3==e.statusCode&&(console.log(new Date(e.data.endTime)),this.meeting=!0,this.startTimer(e.data.endTime))}).catch(e=>{this.loading=!1,console.log(e),r.a.fire({title:"Error",text:e.message,icon:"error"})})}startTimer(e){let t,n;this.x=setInterval(()=>{t=(new Date).getTime(),n=new Date(e);var i=n-t,o=(Math.floor(i/864e5),Math.floor(i%864e5/36e5)),r=Math.floor(i%36e5/6e4),c=Math.floor(i%6e4/1e3);this.hour=o,this.minute=r,this.second=c,i<0&&(clearInterval(this.x),this.meeting=!1,console.log("end hit"))},1e3)}toggleScreen(){$("#iframe").hasClass("fullscreen")?($("#iframe").removeClass("fullscreen"),$("#toggle-icon").html("fullscreen")):($("#iframe").addClass("fullscreen"),$("#toggle-icon").html("fullscreen_exit"))}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(s.a),c.Jb(a.a),c.Jb(l.c))},e.\u0275cmp=c.Db({type:e,selectors:[["app-video-call"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","container",4,"ngIf"],[1,"text-center"],[1,"text","mx-auto","ld-ext-left","running"],[1,"ld","ld-ring","ld-spin"],[1,"container"],[1,"text-dark"],["id","iframe",1,"iframe-container"],[1,"toggle-screen",3,"click"],["id","toggle-icon",1,"material-icons"],["src","https://tokbox.com/embed/embed/ot-embed.js?embedId=bec6518c-a0ab-4c90-a177-f906c4b1979c&room=DEFAULT_ROOM&iframe=true","width","100%","height","auto","scrolling","auto","allow","microphone; camera"],[1,"meeting-over"],["src","assets/img/icons/end.svg","alt",""],["routerLink","/admin",1,"btn"]],template:function(e,t){1&e&&(c.oc(0,g,5,0,"ng-container",0),c.oc(1,b,3,2,"div",1)),2&e&&(c.ec("ngIf",t.loading),c.zb(1),c.ec("ngIf",!t.loading))},directives:[i.k,l.e],styles:[".meeting-over[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:5rem}.meeting-over[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.6;height:7rem;margin-bottom:2rem}.meeting-over[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.iframe-container[_ngcontent-%COMP%]{z-index:2;margin:4rem 0;width:100%;height:0;box-shadow:0 2rem 5rem 0 rgba(123,136,153,.25);padding-bottom:56.25%;position:relative;overflow:hidden}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;left:0;top:0;border:none;height:100%;width:100%}.toggle-screen[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;right:0;padding:.5rem;z-index:10}.toggle-screen[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#fff}@media (max-width:47.99em){.toggle-screen[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem}}#iframe.fullscreen[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;margin:0;z-index:9999}"]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[i.b,l.f.forChild(h)]]}),e})()}}]);