(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{pBEy:function(t,e,n){"use strict";n.r(e),n.d(e,"AddSlotModule",(function(){return k}));var r=n("ofXK"),i=n("PSD3"),o=n.n(i),a=n("3Pt+"),d=n("fXoL"),s=n("N+K7"),c=n("dz5x"),l=n("IvIE");function b(t,e){if(1&t){const t=d.Pb();d.Ob(0,"button",18),d.Wb("click",(function(){return d.ic(t),d.Yb().showDay=!1})),d.nc(1," Go Back "),d.Nb()}}function m(t,e){if(1&t&&d.Kb(0,"full-calendar",19),2&t){const t=d.Yb();d.dc("options",t.calendarOptionsMonth)}}function u(t,e){if(1&t&&d.Kb(0,"full-calendar",19),2&t){const t=d.Yb();d.dc("options",t.calendarOptionsDay)}}let h=(()=>{class t{constructor(t,e){this.http=t,this.share=e,this.form=new a.e({adminId:new a.c(this.share.user,{validators:[a.q.required]}),dateAvailable:new a.c(null,{validators:[a.q.required]}),startTime:new a.c(null,{validators:[a.q.required]}),endTime:new a.c(null,{validators:[a.q.required]}),startTimeStr:new a.c(null,{validators:[a.q.required]}),endTimeStr:new a.c(null,{validators:[a.q.required]}),duration:new a.c(null,{validators:[a.q.required]})}),this.selectedDate="",this.bookedEvents=[],this.calendarOptionsMonth={headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,listMonth"},initialView:"dayGridMonth",weekends:!0,eventClick:this.deleteEvent.bind(this),dateClick:this.dateClick.bind(this),eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!0},displayEventEnd:!0,events:this.bookedEvents},this.calendarOptionsDay={initialDate:this.selectedDate,initialView:"timeGridDay",weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.selectTime.bind(this),eventClick:this.deleteEvent.bind(this),events:this.bookedEvents}}ngOnInit(){this.showDay=!1,this.http.postToBackend("/admin/slot/all",{adminId:this.share.user}).then(t=>{console.log(t);let e=0;this.bookedEvents=t.data.map(t=>({id:t.id,title:"Slot Available "+e++,date:t.date,startStr:t.startTimeStr,endStr:t.endTimeStr,allDay:!1})),this.calendarOptionsMonth.events=this.bookedEvents,this.calendarOptionsDay.events=this.bookedEvents})}dateClick(t){console.log(t),this.selectedDate=t.dateStr,this.calendarOptionsDay.initialDate=this.selectedDate,this.showDay=!0}selectTime(t){console.log(t),this.calendarMonthRef=t.view.calendar,this.currentEvent=t;let e,n=this.findDuration(this.currentEvent.startStr,this.currentEvent.endStr);this.currentEvent.duration=n,n>90||n<30?o.a.fire("Not Valid","Slot duration can be between 30 to 90 min.","error"):(e=this.currentEvent.duration<=30?"#1ac293":this.currentEvent.duration<=60?"#0564b6":"#202020",this.currentEvent.backgroundColor=e,this.currentEvent.borderColor=e,this.currentEvent.textColor="#fff",console.log("duration -",this.findDuration(this.currentEvent.startStr,this.currentEvent.endStr)),$("#slot-modal").modal("toggle"))}addSlot(){this.form.patchValue({dateAvailable:this.currentEvent.start,startTime:this.currentEvent.start,endTime:this.currentEvent.end,startTimeStr:this.currentEvent.startStr,endTimeStr:this.currentEvent.endStr,duration:this.currentEvent.duration}),console.log(this.form.value),this.bookedEvents.push(this.currentEvent),console.log("updated events - ",this.bookedEvents),this.calendarMonthRef.addEvent(this.currentEvent),this.http.postToBackend("/admin/slot/create",this.form.value).then(t=>{console.log(t),7e3==t.statusCode&&($("#slot-modal").modal("toggle"),o.a.fire({icon:"success",title:"Slot Created"}))}).catch(t=>{console.log(t)})}findDuration(t,e){let n=new Date(t);var r=(new Date(e).getTime()-n.getTime())/1e3;return Math.abs(Math.round(r/=60))}deleteEvent(t){o.a.fire({icon:"warning",title:"Delete this event"})}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(s.a),d.Jb(c.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-add-slot"]],decls:38,vars:16,consts:[[1,"d-flex","align-items-center","justify-content-between","mb-5"],[1,"text-dark","text-center"],["class","btn btn-sm btn-dark mt-0",3,"click",4,"ngIf"],[1,"calendar-container"],[3,"options",4,"ngIf"],["id","slot-modal",1,"modal"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-dark","text-center"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body","text-center"],[1,"text","mb-2"],[1,"text-700"],[1,"text","mb-5"],[1,"modal-footer"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-dark"],[1,"btn","btn-sm","btn-dark","mt-0",3,"click"],[3,"options"]],template:function(t,e){1&t&&(d.Ob(0,"div",0),d.Ob(1,"h3",1),d.nc(2," Book new meeting slots "),d.Nb(),d.mc(3,b,2,0,"button",2),d.Nb(),d.Ob(4,"div",3),d.mc(5,m,1,1,"full-calendar",4),d.mc(6,u,1,1,"full-calendar",4),d.Nb(),d.Ob(7,"div",5),d.Ob(8,"div",6),d.Ob(9,"div",7),d.Ob(10,"div",8),d.Ob(11,"h4",9),d.nc(12,"Add this slot ?"),d.Nb(),d.Ob(13,"button",10),d.nc(14,"\xd7"),d.Nb(),d.Nb(),d.Ob(15,"div",11),d.Ob(16,"h5",1),d.nc(17," Slot Timings "),d.Nb(),d.Ob(18,"p",12),d.Ob(19,"span",13),d.nc(20,"Date: "),d.Nb(),d.nc(21),d.Zb(22,"date"),d.Nb(),d.Ob(23,"p",14),d.Ob(24,"span",13),d.nc(25,"Time: "),d.Nb(),d.nc(26),d.Zb(27,"date"),d.Zb(28,"date"),d.Nb(),d.Ob(29,"p",14),d.Ob(30,"span",13),d.nc(31,"Duration: "),d.Nb(),d.nc(32),d.Nb(),d.Nb(),d.Ob(33,"div",15),d.Ob(34,"button",16),d.Wb("click",(function(){return e.addSlot()})),d.nc(35,"Confirm this slot"),d.Nb(),d.Ob(36,"button",17),d.nc(37,"No"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&t&&(d.zb(3),d.dc("ngIf",e.showDay),d.zb(2),d.dc("ngIf",!e.showDay),d.zb(1),d.dc("ngIf",e.showDay),d.zb(15),d.pc(" ",d.ac(22,7,null==e.currentEvent?null:e.currentEvent.startStr,"fullDate")," "),d.zb(5),d.qc(" ",d.ac(27,10,null==e.currentEvent?null:e.currentEvent.startStr,"shortTime")," - ",d.ac(28,13,null==e.currentEvent?null:e.currentEvent.endStr,"shortTime")," "),d.zb(6),d.pc(" ",null==e.currentEvent?null:e.currentEvent.duration," minutes "))},directives:[r.k,l.a],pipes:[r.d],styles:[".modal[_ngcontent-%COMP%]{padding:2rem;-webkit-animation:fade_in .32s cubic-bezier(.45,.19,.13,1.26) forwards;animation:fade_in .32s cubic-bezier(.45,.19,.13,1.26) forwards}.modal-dialog[_ngcontent-%COMP%]{margin:0 auto;min-height:90vh;display:flex;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]{box-shadow:0 4rem 10rem -1rem rgba(87,96,109,.5);border-radius:.8rem;padding:1.5rem 2rem;border:none}.modal-title[_ngcontent-%COMP%]{text-align:center}.modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{background-color:transparent;color:#000}.form[_ngcontent-%COMP%]{max-width:45rem;width:100%;text-align:center}.form-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;min-height:100vh;overflow:hidden;background-color:#dfe6f6;padding:15rem 0 5rem;position:relative}@media (max-width:47.99em){.form-wrapper[_ngcontent-%COMP%]{padding-top:20rem}}.form-header[_ngcontent-%COMP%]{text-align:center;opacity:0;position:relative;z-index:10;-webkit-animation:fade_up .3s cubic-bezier(.25,.46,.45,.94) forwards;animation:fade_up .3s cubic-bezier(.25,.46,.45,.94) forwards;-webkit-animation-delay:.2s;animation-delay:.2s}.form-card[_ngcontent-%COMP%]{box-shadow:0 2rem 5rem 0 rgba(123,136,153,.25);border-radius:1rem;padding:3rem 3rem 4rem;background-color:#fff;position:relative;z-index:5;-webkit-animation:fade_up .5s cubic-bezier(.45,.19,.13,1.26) forwards;animation:fade_up .5s cubic-bezier(.45,.19,.13,1.26) forwards}.form-input[_ngcontent-%COMP%]{display:block;width:100%;margin:0 auto 3rem;padding:1rem 2rem;background-color:#eef4ff;outline:none!important;font-family:Inter;transition:all .3s cubic-bezier(.25,.46,.45,.94);border:none;border-bottom:1.2px solid transparent}.form-input[_ngcontent-%COMP%]::-webkit-input-placeholder{opacity:.7}.form-input[_ngcontent-%COMP%]:focus{border-color:#1ac293;box-shadow:0 2rem 5rem 0 rgba(123,136,153,.25)}.form-text[_ngcontent-%COMP%]{margin-top:2rem;color:#858585}.form-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#202020;font-weight:700}.form-bg--1[_ngcontent-%COMP%]{width:40rem;opacity:.4;transform:translate(10%,20%)}.form-circle[_ngcontent-%COMP%]{top:12vh;right:28vw;width:30rem;height:30rem}.form-circle-1[_ngcontent-%COMP%]{width:40rem;height:40rem;opacity:.1;border-radius:50%;border:1.5px solid #202020;transform:translate(30%,-40%)}select[_ngcontent-%COMP%]{-moz-appearance:none;-webkit-appearance:none;appearance:none;background-image:url(\"data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>\");background-repeat:no-repeat;background-position-x:99%;background-position-y:7px}.calendar-container[_ngcontent-%COMP%]{background-color:#fff;padding:4rem 2rem;border-radius:1rem}"]}),t})();var p=n("tyNb"),f=n("PN1e"),g=n("PjKf"),v=n("5E5Q"),w=n("ogxq");l.b.registerPlugins([f.b,g.a,v.a,w.a]);const O=[{path:"",component:h}];let k=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[r.b,l.b,p.f.forChild(O)]]}),t})()}}]);