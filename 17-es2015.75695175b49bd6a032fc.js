(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{PqMW:function(t,e,o){"use strict";o.r(e),o.d(e,"BookingDetailsModule",(function(){return g}));var n=o("ofXK"),l=o("PSD3"),i=o.n(l),s=o("fXoL"),b=o("tyNb"),c=o("CNll"),a=o("N+K7");function r(t,e){1&t&&(s.Mb(0),s.Ob(1,"div",3),s.Ob(2,"span",4),s.oc(3," Getting booking details... "),s.Kb(4,"div",5),s.Nb(),s.Nb(),s.Lb())}const d=function(){return["/admin/video-call"]};function u(t,e){if(1&t){const t=s.Pb();s.Ob(0,"div",6),s.Ob(1,"div",7),s.Ob(2,"div",8),s.Ob(3,"h5",9),s.oc(4,"Customer details"),s.Nb(),s.Ob(5,"p"),s.oc(6,"Name"),s.Nb(),s.Ob(7,"p",10),s.oc(8),s.Nb(),s.Ob(9,"p"),s.oc(10,"Phone Number"),s.Nb(),s.Ob(11,"p",10),s.oc(12),s.Nb(),s.Ob(13,"p"),s.oc(14,"Consulting Type"),s.Nb(),s.Ob(15,"p",10),s.oc(16),s.Zb(17,"titlecase"),s.Nb(),s.Ob(18,"p"),s.oc(19,"Reason for meeting"),s.Nb(),s.Ob(20,"p",10),s.oc(21),s.Nb(),s.Nb(),s.Ob(22,"div",8),s.Ob(23,"h5",9),s.oc(24,"Slot details"),s.Nb(),s.Ob(25,"h5"),s.oc(26),s.Zb(27,"date"),s.Nb(),s.Ob(28,"h4",11),s.oc(29),s.Zb(30,"date"),s.Zb(31,"date"),s.Nb(),s.Ob(32,"p",12),s.oc(33,"Duration of the meeting"),s.Nb(),s.Ob(34,"p",13),s.oc(35),s.Nb(),s.Nb(),s.Ob(36,"div",8),s.Ob(37,"h5",9),s.oc(38,"Payment details"),s.Nb(),s.Ob(39,"div",14),s.Ob(40,"div",15),s.Ob(41,"p",16),s.oc(42,"Total Amount Paid:"),s.Nb(),s.Ob(43,"h2"),s.oc(44),s.Nb(),s.Nb(),s.Nb(),s.Kb(45,"div",17),s.Nb(),s.Nb(),s.Ob(46,"div",18),s.Ob(47,"div",19),s.Ob(48,"div",14),s.Ob(49,"a",20),s.oc(50," Attend Meeting"),s.Nb(),s.Ob(51,"button",21),s.Wb("click",(function(){s.jc(t);const e=s.Yb();return e.cancelBooked(null==e.slot?null:e.slot.id,null==e.slot?null:e.slot.bookingDetails.payment_id)})),s.oc(52,"Cancel Meeting"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=s.Yb();s.zb(8),s.pc(null==t.slot?null:t.slot.bookingDetails.full_name),s.zb(4),s.pc(null==t.slot?null:t.slot.bookingDetails.mobile_no),s.zb(4),s.pc(s.ac(17,10,null==t.slot?null:t.slot.bookingDetails.counsulting_type)),s.zb(5),s.pc(null==t.slot?null:t.slot.bookingDetails.reason),s.zb(5),s.qc(" ",s.bc(27,12,null==t.slot?null:t.slot.date,"MMMM d,y")," "),s.zb(3),s.rc(" ",s.bc(30,15,null==t.slot?null:t.slot.startTime,"h:mm a")," - ",s.bc(31,18,null==t.slot?null:t.slot.endTime,"h:mm a")," "),s.zb(6),s.qc(" ",null==t.slot?null:t.slot.duration," min"),s.zb(9),s.qc("$",null==t.slot?null:t.slot.bookingDetails.amount_paid,""),s.zb(5),s.ec("routerLink",s.gc(21,d))}}const m=[{path:"",component:(()=>{class t{constructor(t,e,o,n){this.route=t,this.share=e,this.http=o,this.router=n}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{this.http.postToBackend("/admin/slot/detail",{adminId:this.share.user,slotId:t.id}).then(t=>{this.loading=!1,console.log(t),7e3===t.statusCode?this.slot=t.data:i.a.fire("Error",t.message,"error")}).catch(t=>{this.loading=!1,console.log(t),i.a.fire({icon:"error",title:"Can't process this request",text:t.message})})})}cancelBooked(t,e){i.a.fire({icon:"question",title:"Delete this slot?",text:"This slot is booked. Removing it will require refund for the slot. Do you still want to delete it?",showCancelButton:!0,confirmButtonText:"Yes, delete this slot!"}).then(o=>{o.value&&this.http.postToBackend("/admin/refund",{adminId:this.share.user,slotId:t,transactionId:e}).then(t=>{console.log(t),7e3===t.statusCode?(i.a.fire("Deleted","Slot Deleted Successfully","success"),this.router.navigate(["admin/all-bookings"])):i.a.fire("Sorry ",t.message,"error")}).catch(t=>{console.log(t),i.a.fire("Failed to delete the slot",t.message,"error")})})}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(b.a),s.Jb(c.a),s.Jb(a.a),s.Jb(b.c))},t.\u0275cmp=s.Db({type:t,selectors:[["app-booking-details"]],decls:4,vars:2,consts:[[1,"text-dark","mb-4"],[4,"ngIf"],["class","booking-details",4,"ngIf"],[1,"text-center","mt-5","pt-4"],[1,"text","mx-auto","ld-ext-left","running"],[1,"ld","ld-ring","ld-spin"],[1,"booking-details"],[1,"row","mt-5"],[1,"col-md-4"],[1,"text-dark","mb-5"],[1,"text"],[1,"text-dark"],[1,"mb-2","mt-4"],[1,"text-block","text-block--dark","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"content"],[1,"text","mb-1"],[1,"d-flex","align-items-center","justify-content-between"],[1,"row"],[1,"col-lg-6","col-md-8","col-sm-10"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(s.Ob(0,"h2",0),s.oc(1,"Booking details"),s.Nb(),s.nc(2,r,5,0,"ng-container",1),s.nc(3,u,53,22,"div",2)),2&t&&(s.zb(2),s.ec("ngIf",e.loading),s.zb(1),s.ec("ngIf",!e.loading))},directives:[n.k,b.e],pipes:[n.p,n.d],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[n.b,b.f.forChild(m)]]}),t})()}}]);